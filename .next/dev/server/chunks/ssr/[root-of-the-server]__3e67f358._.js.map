{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/infrastructure/external/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://dummy.supabase.co';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'dummy-key';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,sFAA6C;AAE9D,MAAM,WAAW,IAAA,uLAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/infrastructure/repositories/SupabaseProductRepository.ts"],"sourcesContent":["import { supabase } from '@/infrastructure/external/supabase';\r\nimport type { IProduct } from '@/domain/entities/product';\r\nimport type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\n\r\nexport class SupabaseProductRepository implements IProductRepository {\r\n  async fetchProducts(from: number, to: number) {\r\n    const { data, error, count } = await supabase\r\n      .from('products')\r\n      .select('*', { count: 'exact' })\r\n      .order('quantity', { ascending: false })\r\n      .order('id', { ascending: true })\r\n      .range(from, to);\r\n\r\n    return { data, count, error };\r\n  }\r\n\r\n  async fetchProductByIds(ids: number[]) {\r\n    const { data } = await supabase.from('products').select('*').in('id', ids);\r\n    return data || [];\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM;IACX,MAAM,cAAc,IAAY,EAAE,EAAU,EAAE;QAC5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAC1C,IAAI,CAAC,YACL,MAAM,CAAC,KAAK;YAAE,OAAO;QAAQ,GAC7B,KAAK,CAAC,YAAY;YAAE,WAAW;QAAM,GACrC,KAAK,CAAC,MAAM;YAAE,WAAW;QAAK,GAC9B,KAAK,CAAC,MAAM;QAEf,OAAO;YAAE;YAAM;YAAO;QAAM;IAC9B;IAEA,MAAM,kBAAkB,GAAa,EAAE;QACrC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM;QACtE,OAAO,QAAQ,EAAE;IACnB;AACF"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/application/use-cases/FetchProductsByIdsUseCase.ts"],"sourcesContent":["import type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nexport class FetchProductsByIdsUseCase {\r\n  constructor(private productRepository: IProductRepository) {}\r\n\r\n  async execute(ids: number[]): Promise<IProduct[]> {\r\n    return await this.productRepository.fetchProductByIds(ids);\r\n  }\r\n}"],"names":[],"mappings":";;;;AAGO,MAAM;;IACX,YAAY,AAAQ,iBAAqC,CAAE;aAAvC,oBAAA;IAAwC;IAE5D,MAAM,QAAQ,GAAa,EAAuB;QAChD,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC;IACxD;AACF"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/controllers/useCartStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\n\r\nimport { SupabaseProductRepository } from '@/infrastructure/repositories/SupabaseProductRepository';\r\nimport { FetchProductsByIdsUseCase } from '@/application/use-cases/FetchProductsByIdsUseCase';\r\n\r\nimport type { ICartItem } from '@/domain/entities/cart';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nconst productRepository = new SupabaseProductRepository();\r\nconst fetchProductsByIdsUseCase = new FetchProductsByIdsUseCase(productRepository);\r\n\r\ninterface CartState {\r\n  cartItems: ICartItem[];\r\n  isCartOpen: boolean;\r\n\r\n  addToCart: (product: IProduct) => void;\r\n  removeFromCart: (productId: number) => void;\r\n  increaseQuantity: (productId: number) => void;\r\n  decreaseQuantity: (productId: number) => void;\r\n  refreshCartData: () => Promise<void>;\r\n  updateProductDataInCart: (product: IProduct) => void;\r\n  openCart: () => void;\r\n  closeCart: () => void;\r\n}\r\n\r\nexport const selectTotalQuantity = (state: CartState) => \r\n  state.cartItems.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\nexport const useCartStore = create<CartState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      cartItems: [],\r\n      cartProductsData: [],\r\n      isCartOpen: false,\r\n\r\n      addToCart: (product) => set(state => {\r\n        if (product.quantity <= 0) return state;\r\n\r\n        const existing = state.cartItems.find(i => i.productId === product.id);\r\n        if (existing) {\r\n          if (existing.quantity >= product.quantity) return state;\r\n\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === product.id ? { ...i, quantity: i.quantity + 1, productData: product } : i\r\n            )\r\n          };\r\n        }\r\n\r\n        return {\r\n          cartItems: [...state.cartItems, { productId: product.id, quantity: 1, productData: product }]\r\n        };\r\n      }),\r\n\r\n      removeFromCart: (productId) => set(state => ({\r\n        cartItems: state.cartItems.filter(i => i.productId !== productId),\r\n      })),\r\n\r\n      increaseQuantity: (productId) => set(state => {\r\n        const item = state.cartItems.find(i => i.productId === productId);\r\n        if (item && item.quantity < item.productData.quantity) {\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === productId ? { ...i, quantity: i.quantity + 1 } : i\r\n            )\r\n          };\r\n        }\r\n        return state;\r\n      }),\r\n\r\n      decreaseQuantity: (productId) => set(state => {\r\n        const item = state.cartItems.find(i => i.productId === productId);\r\n        if (item && item.quantity > 1) {\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === productId ? { ...i, quantity: i.quantity - 1 } : i\r\n          )};\r\n        }\r\n        return { cartItems: state.cartItems.filter(i => i.productId !== productId) };\r\n      }),\r\n\r\n      updateProductDataInCart: (product) => set((state) => ({\r\n        cartItems: state.cartItems.map((item) =>\r\n          item.productId === product.id ? { ...item, productData: product } : item\r\n        ),\r\n      })),\r\n\r\n      refreshCartData: async () => {\r\n        const { cartItems } = get();\r\n        if (cartItems.length === 0) return;\r\n        const ids = cartItems.map((i) => i.productId);\r\n        const data = await fetchProductsByIdsUseCase.execute(ids);\r\n        if (data) {\r\n          set({\r\n            cartItems: cartItems.map((item) => {\r\n              const fresh = data.find((d) => d.id === item.productId);\r\n              return fresh ? { ...item, productData: fresh } : item;\r\n            }),\r\n          });\r\n        }\r\n      },\r\n\r\n      openCart: () => set({ isCartOpen: true }),\r\n      closeCart: () => set({ isCartOpen: false }),\r\n    }),\r\n    {\r\n      name: 'shopping-cart-storage', \r\n      storage: createJSONStorage(() => localStorage),\r\n    }\r\n  )\r\n);"],"names":[],"mappings":"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"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/application/use-cases/FetchProductsUseCase.ts"],"sourcesContent":["import type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nexport class FetchProductsUseCase {\r\n  constructor(private productRepository: IProductRepository) {}\r\n\r\n  async execute(from: number, to: number): Promise<{ products: IProduct[]; totalCount: number; error: any }> {\r\n    const { data, count, error } = await this.productRepository.fetchProducts(from, to);\r\n    return {\r\n      products: data || [],\r\n      totalCount: count || 0,\r\n      error,\r\n    };\r\n  }\r\n}"],"names":[],"mappings":";;;;AAGO,MAAM;;IACX,YAAY,AAAQ,iBAAqC,CAAE;aAAvC,oBAAA;IAAwC;IAE5D,MAAM,QAAQ,IAAY,EAAE,EAAU,EAAqE;QACzG,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,MAAM;QAChF,OAAO;YACL,UAAU,QAAQ,EAAE;YACpB,YAAY,SAAS;YACrB;QACF;IACF;AACF"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/controllers/useProductStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\nimport { SupabaseProductRepository } from '@/infrastructure/repositories/SupabaseProductRepository';\r\nimport { FetchProductsUseCase } from '@/application/use-cases/FetchProductsUseCase';\r\n\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nconst productRepository = new SupabaseProductRepository();\r\nconst fetchProductsUseCase = new FetchProductsUseCase(productRepository);\r\n\r\ninterface ProductState {\r\n  products: IProduct[];\r\n  totalCount: number;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  currentPage: number;\r\n  itemsPerPage: number;\r\n  fetchProducts: () => Promise<void>;\r\n  setCurrentPage: (page: number) => void;\r\n}\r\n\r\nexport const useProductStore = create<ProductState>((set, get) => ({\r\n  products: [],\r\n  totalCount: 0,\r\n  isLoading: false,\r\n  error: null,\r\n  currentPage: 1,\r\n  itemsPerPage: 9,\r\n\r\n  fetchProducts: async () => {\r\n    const { currentPage, itemsPerPage } = get();\r\n    set({ isLoading: true, error: null });\r\n\r\n    const from = (currentPage - 1) * itemsPerPage;\r\n    const to = from + itemsPerPage - 1;\r\n\r\n    const { products, totalCount, error } = await fetchProductsUseCase.execute(from, to);\r\n\r\n    if (error) {\r\n      set({ error: error.message, isLoading: false });\r\n    } else {\r\n      set({ \r\n        products, \r\n        totalCount,\r\n        isLoading: false \r\n      });\r\n    }\r\n  },\r\n\r\n  setCurrentPage: (page) => {\r\n    set({ currentPage: page });\r\n    get().fetchProducts();\r\n  },\r\n}));"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAIA,MAAM,oBAAoB,IAAI,+LAAyB;AACvD,MAAM,uBAAuB,IAAI,kLAAoB,CAAC;AAa/C,MAAM,kBAAkB,IAAA,kJAAM,EAAe,CAAC,KAAK,MAAQ,CAAC;QACjE,UAAU,EAAE;QACZ,YAAY;QACZ,WAAW;QACX,OAAO;QACP,aAAa;QACb,cAAc;QAEd,eAAe;YACb,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG;YACtC,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YAEnC,MAAM,OAAO,CAAC,cAAc,CAAC,IAAI;YACjC,MAAM,KAAK,OAAO,eAAe;YAEjC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM,qBAAqB,OAAO,CAAC,MAAM;YAEjF,IAAI,OAAO;gBACT,IAAI;oBAAE,OAAO,MAAM,OAAO;oBAAE,WAAW;gBAAM;YAC/C,OAAO;gBACL,IAAI;oBACF;oBACA;oBACA,WAAW;gBACb;YACF;QACF;QAEA,gBAAgB,CAAC;YACf,IAAI;gBAAE,aAAa;YAAK;YACxB,MAAM,aAAa;QACrB;IACF,CAAC"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/hooks/useRealtimeSync.ts"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nimport { supabase } from '@/infrastructure/external/supabase';\r\n\r\nimport { type IProduct } from '@/domain/entities/product';\r\n\r\nimport { useProductStore } from '../controllers/useProductStore';\r\nimport { useCartStore } from '../controllers/useCartStore';\r\n\r\nexport const useRealtimeSync = () => {\r\n  useEffect(() => {\r\n    const channel = supabase\r\n      .channel('global-updates')\r\n      .on(\r\n        'postgres_changes',\r\n        { event: 'UPDATE', schema: 'public', table: 'products' },\r\n        (payload) => {\r\n          const updatedProduct = payload.new as IProduct;\r\n\r\n          useProductStore.setState((state) => ({\r\n            products: state.products.map((p) =>\r\n              p.id === updatedProduct.id ? updatedProduct : p\r\n            ),\r\n          }));\r\n\r\n          const { cartItems, updateProductDataInCart } = useCartStore.getState();\r\n          const isInCart = cartItems.some(item => item.productId === updatedProduct.id);\r\n          \r\n          if (isInCart) {\r\n            updateProductDataInCart(updatedProduct);\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, []);\r\n};"],"names":[],"mappings":";;;;AAAA;AAEA;AAIA;AACA;;;;;AAEO,MAAM,kBAAkB;IAC7B,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,yJAAQ,CACrB,OAAO,CAAC,kBACR,EAAE,CACD,oBACA;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;QAAW,GACvD,CAAC;YACC,MAAM,iBAAiB,QAAQ,GAAG;YAElC,wKAAe,CAAC,QAAQ,CAAC,CAAC,QAAU,CAAC;oBACnC,UAAU,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,eAAe,EAAE,GAAG,iBAAiB;gBAElD,CAAC;YAED,MAAM,EAAE,SAAS,EAAE,uBAAuB,EAAE,GAAG,kKAAY,CAAC,QAAQ;YACpE,MAAM,WAAW,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,SAAS,KAAK,eAAe,EAAE;YAE5E,IAAI,UAAU;gBACZ,wBAAwB;YAC1B;QACF,GAED,SAAS;QAEZ,OAAO;YACL,yJAAQ,CAAC,aAAa,CAAC;QACzB;IACF,GAAG,EAAE;AACP"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/hooks/useSyncTabs.ts"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nimport { useCartStore } from '../controllers/useCartStore';\r\n\r\nexport const useSyncTabs = () => {\r\n  useEffect(() => {\r\n    const handleStorageChange = (event: StorageEvent) => {\r\n      if (event.key === 'shopping-cart-storage') {\r\n        useCartStore.persist.rehydrate();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n};"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,MAAM,cAAc;IACzB,IAAA,kNAAS,EAAC;QACR,MAAM,sBAAsB,CAAC;YAC3B,IAAI,MAAM,GAAG,KAAK,yBAAyB;gBACzC,kKAAY,CAAC,OAAO,CAAC,SAAS;YAChC;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG,EAAE;AACP"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/CartItem.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport type { ICartItem } from '@/domain/entities/cart';\r\n\r\nimport { useCartStore } from '@/presentation/controllers/useCartStore';\r\n\r\ninterface CartItemProps {\r\n  item: ICartItem;\r\n}\r\n\r\nconst CartItem: React.FC<CartItemProps> = ({ item }) => {\r\n  const { removeFromCart, increaseQuantity, decreaseQuantity } = useCartStore();\r\n\r\n  const productData = item?.productData;\r\n\r\n  if (!productData) {\r\n    return <div className=\"p-4 bg-red-100 rounded\">Product not found</div>;\r\n  }\r\n\r\n  const discountThreshold = 5;\r\n  const discountRate = 0.10;\r\n  \r\n  const originalItemPrice = productData.price * item.quantity;\r\n  let finalItemPrice = originalItemPrice;\r\n  let isDiscountApplied = false;\r\n\r\n  if (item.quantity > discountThreshold) {\r\n    isDiscountApplied = true;\r\n    finalItemPrice = originalItemPrice * (1 - discountRate);\r\n  }\r\n\r\n  const isOverStock = item.quantity > productData.quantity;\r\n  const isLimitReached = item.quantity >= productData.quantity;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-center p-4 bg-white shadow-sm rounded-lg mb-3\">\r\n      <div className=\"flex items-center space-x-4 md:col-span-2\">\r\n        <img src={productData.image_url} alt={productData.title} className=\"w-16 h-16 object-cover rounded shadow-sm\" />\r\n        <div>\r\n          <h4 className=\"font-semibold truncate max-w-xs\">{productData.title}</h4>\r\n          <p className=\"text-sm text-gray-500\">Price: ${productData.price.toFixed(2)}</p>\r\n\r\n          {isOverStock && (\r\n            <p className=\"text-red-500 text-xs font-bold mt-1\">\r\n              ⚠️ Available only {productData.quantity} pc. Decrease quantity.\r\n            </p>\r\n          )}\r\n\r\n          <p className={`text-xs mt-1 font-medium ${isDiscountApplied ? 'text-green-600' : 'text-transparent'}`}>\r\n              {isDiscountApplied ? 'Discoint 10% for buying more than 5.' : '\\u00A0'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"flex items-center justify-between md:justify-end space-x-4 md:col-span-1\">\r\n\r\n        <div className=\"flex items-center border rounded-lg\">\r\n            <button \r\n                onClick={() => decreaseQuantity(item.productId)}\r\n                className=\"px-3 py-1 text-indigo-600 hover:bg-indigo-100 rounded-l-lg transition cursor-pointer\"\r\n                title=\"Decrease quantity\"\r\n            >\r\n                -\r\n            </button>\r\n            <span className={`px-3 py-1 border-l border-r ${isOverStock ? 'text-red-600 font-bold' : ''}`}>\r\n                {item.quantity}\r\n            </span>\r\n            <button \r\n                disabled={isLimitReached}\r\n                onClick={() => increaseQuantity(item.productId)}\r\n                className={`px-3 py-1 rounded-r-lg transition ${\r\n                    isLimitReached \r\n                    ? 'text-gray-300 cursor-not-allowed' \r\n                    : 'text-indigo-600 hover:bg-indigo-100 cursor-pointer'\r\n                }`}\r\n                title={isLimitReached ? \"Quantity limit reached\" : \"Increase quantity\"}\r\n            >\r\n                +\r\n            </button>\r\n        </div>\r\n\r\n        <div className=\"text-right w-32\">\r\n            {isDiscountApplied && (\r\n                <p className=\"text-sm text-gray-400 line-through\">${originalItemPrice.toFixed(2)}</p>\r\n            )}\r\n            <p className=\"font-bold text-lg text-indigo-600\">${finalItemPrice.toFixed(2)}</p>\r\n        </div>\r\n\r\n        <button \r\n            onClick={() => removeFromCart(item.productId)}\r\n            className=\"text-red-500 hover:text-red-700 transition p-2 cursor-pointer\"\r\n            title=\"Remove item from cart\"\r\n        >\r\n            ✕\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;"],"names":[],"mappings":";;;;;AAIA;;;AAMA,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE;IACjD,MAAM,EAAE,cAAc,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,GAAG,IAAA,kKAAY;IAE3E,MAAM,cAAc,MAAM;IAE1B,IAAI,CAAC,aAAa;QAChB,qBAAO,8OAAC;YAAI,WAAU;sBAAyB;;;;;;IACjD;IAEA,MAAM,oBAAoB;IAC1B,MAAM,eAAe;IAErB,MAAM,oBAAoB,YAAY,KAAK,GAAG,KAAK,QAAQ;IAC3D,IAAI,iBAAiB;IACrB,IAAI,oBAAoB;IAExB,IAAI,KAAK,QAAQ,GAAG,mBAAmB;QACrC,oBAAoB;QACpB,iBAAiB,oBAAoB,CAAC,IAAI,YAAY;IACxD;IAEA,MAAM,cAAc,KAAK,QAAQ,GAAG,YAAY,QAAQ;IACxD,MAAM,iBAAiB,KAAK,QAAQ,IAAI,YAAY,QAAQ;IAE5D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,KAAK,YAAY,SAAS;wBAAE,KAAK,YAAY,KAAK;wBAAE,WAAU;;;;;;kCACnE,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAmC,YAAY,KAAK;;;;;;0CAClE,8OAAC;gCAAE,WAAU;;oCAAwB;oCAAS,YAAY,KAAK,CAAC,OAAO,CAAC;;;;;;;4BAEvE,6BACC,8OAAC;gCAAE,WAAU;;oCAAsC;oCAC9B,YAAY,QAAQ;oCAAC;;;;;;;0CAI5C,8OAAC;gCAAE,WAAW,CAAC,yBAAyB,EAAE,oBAAoB,mBAAmB,oBAAoB;0CAChG,oBAAoB,yCAAyC;;;;;;;;;;;;;;;;;;0BAKtE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,iBAAiB,KAAK,SAAS;gCAC9C,WAAU;gCACV,OAAM;0CACT;;;;;;0CAGD,8OAAC;gCAAK,WAAW,CAAC,4BAA4B,EAAE,cAAc,2BAA2B,IAAI;0CACxF,KAAK,QAAQ;;;;;;0CAElB,8OAAC;gCACG,UAAU;gCACV,SAAS,IAAM,iBAAiB,KAAK,SAAS;gCAC9C,WAAW,CAAC,kCAAkC,EAC1C,iBACE,qCACA,sDACJ;gCACF,OAAO,iBAAiB,2BAA2B;0CACtD;;;;;;;;;;;;kCAKL,8OAAC;wBAAI,WAAU;;4BACV,mCACG,8OAAC;gCAAE,WAAU;;oCAAqC;oCAAE,kBAAkB,OAAO,CAAC;;;;;;;0CAElF,8OAAC;gCAAE,WAAU;;oCAAoC;oCAAE,eAAe,OAAO,CAAC;;;;;;;;;;;;;kCAG9E,8OAAC;wBACG,SAAS,IAAM,eAAe,KAAK,SAAS;wBAC5C,WAAU;wBACV,OAAM;kCACT;;;;;;;;;;;;;;;;;;AAMT;uCAEe"}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/ShoppingCart.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport type { ICartItem } from '@/domain/entities/cart';\r\n\r\nimport { useCartStore } from '@/presentation/controllers/useCartStore';\r\n\r\nimport CartItem from './CartItem';\r\n\r\nconst calculateTotal = (cartItems: ICartItem[]) => {\r\n    const discountThreshold = 5;\r\n    const discountRate = 0.10;\r\n    let total = 0;\r\n\r\n    cartItems.forEach(item => {\r\n      const originalItemPrice = item.productData.price * item.quantity;\r\n      if (item.quantity > discountThreshold) {\r\n        total += originalItemPrice * (1 - discountRate);\r\n      } else {\r\n        total += originalItemPrice;\r\n      }\r\n    });\r\n    return total;\r\n  };\r\n\r\nconst ShoppingCart: React.FC = () => {\r\n  const { cartItems } = useCartStore();\r\n\r\n  const total = calculateTotal(cartItems);\r\n\r\n  const hasInventoryErrors = cartItems.some(item => \r\n    item.quantity > item.productData.quantity\r\n  );\r\n\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div className=\"p-8 text-center bg-white rounded-lg shadow\">\r\n        <p className=\"text-gray-500 text-lg\">Your cart is empty</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n      <div className=\"lg:col-span-2 space-y-4\">\r\n        {cartItems.map(item => (\r\n          <CartItem \r\n            key={item.productId} \r\n            item={item}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"lg:col-span-1 bg-white p-6 rounded-lg shadow-lg h-fit sticky top-4\">\r\n        <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">Summary</h3>\r\n        \r\n        <div className=\"space-y-3 border-t pt-4\">\r\n          <div className=\"flex justify-between font-bold text-2xl text-indigo-600\">\r\n            <span>Total sum:</span>\r\n            <span>${total.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          disabled={hasInventoryErrors}\r\n          className={`mt-6 w-full py-3 rounded-lg transition duration-200 font-bold text-lg ${\r\n            hasInventoryErrors \r\n            ? 'bg-gray-300 cursor-not-allowed text-gray-500' \r\n            : 'bg-green-600 text-white hover:bg-green-700 cursor-pointer shadow-md'\r\n          }`}\r\n        >\r\n          {hasInventoryErrors ? 'Check Inventory' : 'Order Now'}\r\n        </button>\r\n\r\n        {hasInventoryErrors && (\r\n          <div className=\"mt-4 p-3 bg-red-50 rounded-md border border-red-100\">\r\n            <p className=\"text-red-600 text-xs text-center font-medium uppercase tracking-wider\">\r\n              ⚠️ Not enough stock for some items\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShoppingCart;"],"names":[],"mappings":";;;;;AAIA;AAEA;;;;AAEA,MAAM,iBAAiB,CAAC;IACpB,MAAM,oBAAoB;IAC1B,MAAM,eAAe;IACrB,IAAI,QAAQ;IAEZ,UAAU,OAAO,CAAC,CAAA;QAChB,MAAM,oBAAoB,KAAK,WAAW,CAAC,KAAK,GAAG,KAAK,QAAQ;QAChE,IAAI,KAAK,QAAQ,GAAG,mBAAmB;YACrC,SAAS,oBAAoB,CAAC,IAAI,YAAY;QAChD,OAAO;YACL,SAAS;QACX;IACF;IACA,OAAO;AACT;AAEF,MAAM,eAAyB;IAC7B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,kKAAY;IAElC,MAAM,QAAQ,eAAe;IAE7B,MAAM,qBAAqB,UAAU,IAAI,CAAC,CAAA,OACxC,KAAK,QAAQ,GAAG,KAAK,WAAW,CAAC,QAAQ;IAG3C,IAAI,UAAU,MAAM,KAAK,GAAG;QAC1B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAA,qBACb,8OAAC,yJAAQ;wBAEP,MAAM;uBADD,KAAK,SAAS;;;;;;;;;;0BAMzB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAEzD,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CAAK;;;;;;8CACN,8OAAC;;wCAAK;wCAAE,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;;;kCAI1B,8OAAC;wBACC,UAAU;wBACV,WAAW,CAAC,sEAAsE,EAChF,qBACE,iDACA,uEACF;kCAED,qBAAqB,oBAAoB;;;;;;oBAG3C,oCACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAwE;;;;;;;;;;;;;;;;;;;;;;;AAQjG;uCAEe"}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/app/cart/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\n\r\nimport { useCartStore } from '@/presentation/controllers/useCartStore';\r\n\r\nimport { useRealtimeSync } from '@/presentation/hooks/useRealtimeSync';\r\nimport { useSyncTabs } from '@/presentation/hooks/useSyncTabs';\r\n\r\nimport ShoppingCart from '@/presentation/components/ShoppingCart';\r\n\r\nexport default function CartPage() {\r\n  const { refreshCartData } = useCartStore();\r\n\r\n  useRealtimeSync();\r\n  useSyncTabs();\r\n\r\n  useEffect(() => {\r\n    refreshCartData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-4 md:p-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-800 mb-8\">Your Cart</h1>\r\n      <ShoppingCart />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AAEA;AACA;AAEA;AATA;;;;;;;AAWe,SAAS;IACtB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,kKAAY;IAExC,IAAA,kKAAe;IACf,IAAA,0JAAW;IAEX,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,8OAAC,6JAAY;;;;;;;;;;;AAGnB"}}]
}