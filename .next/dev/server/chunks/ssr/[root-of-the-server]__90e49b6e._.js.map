{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/infrastructure/external/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://dummy.supabase.co';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'dummy-key';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,sFAA6C;AAE9D,MAAM,WAAW,IAAA,uLAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/infrastructure/repositories/SupabaseProductRepository.ts"],"sourcesContent":["import { supabase } from '@/infrastructure/external/supabase';\r\nimport type { IProduct } from '@/domain/entities/product';\r\nimport type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\n\r\nexport class SupabaseProductRepository implements IProductRepository {\r\n  async fetchProducts(from: number, to: number) {\r\n    const { data, error, count } = await supabase\r\n      .from('products')\r\n      .select('*', { count: 'exact' })\r\n      .order('quantity', { ascending: false })\r\n      .order('id', { ascending: true })\r\n      .range(from, to);\r\n\r\n    return { data, count, error };\r\n  }\r\n\r\n  async fetchProductByIds(ids: number[]) {\r\n    const { data } = await supabase.from('products').select('*').in('id', ids);\r\n    return data || [];\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM;IACX,MAAM,cAAc,IAAY,EAAE,EAAU,EAAE;QAC5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAC1C,IAAI,CAAC,YACL,MAAM,CAAC,KAAK;YAAE,OAAO;QAAQ,GAC7B,KAAK,CAAC,YAAY;YAAE,WAAW;QAAM,GACrC,KAAK,CAAC,MAAM;YAAE,WAAW;QAAK,GAC9B,KAAK,CAAC,MAAM;QAEf,OAAO;YAAE;YAAM;YAAO;QAAM;IAC9B;IAEA,MAAM,kBAAkB,GAAa,EAAE;QACrC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM;QACtE,OAAO,QAAQ,EAAE;IACnB;AACF"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/application/use-cases/FetchProductsByIdsUseCase.ts"],"sourcesContent":["import type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nexport class FetchProductsByIdsUseCase {\r\n  constructor(private productRepository: IProductRepository) {}\r\n\r\n  async execute(ids: number[]): Promise<IProduct[]> {\r\n    return await this.productRepository.fetchProductByIds(ids);\r\n  }\r\n}"],"names":[],"mappings":";;;;AAGO,MAAM;;IACX,YAAY,AAAQ,iBAAqC,CAAE;aAAvC,oBAAA;IAAwC;IAE5D,MAAM,QAAQ,GAAa,EAAuB;QAChD,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC;IACxD;AACF"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/controllers/useCartStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\n\r\nimport { SupabaseProductRepository } from '@/infrastructure/repositories/SupabaseProductRepository';\r\nimport { FetchProductsByIdsUseCase } from '@/application/use-cases/FetchProductsByIdsUseCase';\r\n\r\nimport type { ICartItem } from '@/domain/entities/cart';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nconst productRepository = new SupabaseProductRepository();\r\nconst fetchProductsByIdsUseCase = new FetchProductsByIdsUseCase(productRepository);\r\n\r\ninterface CartState {\r\n  cartItems: ICartItem[];\r\n  isCartOpen: boolean;\r\n\r\n  addToCart: (product: IProduct) => void;\r\n  removeFromCart: (productId: number) => void;\r\n  increaseQuantity: (productId: number) => void;\r\n  decreaseQuantity: (productId: number) => void;\r\n  refreshCartData: () => Promise<void>;\r\n  updateProductDataInCart: (product: IProduct) => void;\r\n  openCart: () => void;\r\n  closeCart: () => void;\r\n}\r\n\r\nexport const selectTotalQuantity = (state: CartState) => \r\n  state.cartItems.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\nexport const useCartStore = create<CartState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      cartItems: [],\r\n      cartProductsData: [],\r\n      isCartOpen: false,\r\n\r\n      addToCart: (product) => set(state => {\r\n        if (product.quantity <= 0) return state;\r\n\r\n        const existing = state.cartItems.find(i => i.productId === product.id);\r\n        if (existing) {\r\n          if (existing.quantity >= product.quantity) return state;\r\n\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === product.id ? { ...i, quantity: i.quantity + 1, productData: product } : i\r\n            )\r\n          };\r\n        }\r\n\r\n        return {\r\n          cartItems: [...state.cartItems, { productId: product.id, quantity: 1, productData: product }]\r\n        };\r\n      }),\r\n\r\n      removeFromCart: (productId) => set(state => ({\r\n        cartItems: state.cartItems.filter(i => i.productId !== productId),\r\n      })),\r\n\r\n      increaseQuantity: (productId) => set(state => {\r\n        const item = state.cartItems.find(i => i.productId === productId);\r\n        if (item && item.quantity < item.productData.quantity) {\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === productId ? { ...i, quantity: i.quantity + 1 } : i\r\n            )\r\n          };\r\n        }\r\n        return state;\r\n      }),\r\n\r\n      decreaseQuantity: (productId) => set(state => {\r\n        const item = state.cartItems.find(i => i.productId === productId);\r\n        if (item && item.quantity > 1) {\r\n          return {\r\n            cartItems: state.cartItems.map(i => \r\n              i.productId === productId ? { ...i, quantity: i.quantity - 1 } : i\r\n          )};\r\n        }\r\n        return { cartItems: state.cartItems.filter(i => i.productId !== productId) };\r\n      }),\r\n\r\n      updateProductDataInCart: (product) => set((state) => ({\r\n        cartItems: state.cartItems.map((item) =>\r\n          item.productId === product.id ? { ...item, productData: product } : item\r\n        ),\r\n      })),\r\n\r\n      refreshCartData: async () => {\r\n        const { cartItems } = get();\r\n        if (cartItems.length === 0) return;\r\n        const ids = cartItems.map((i) => i.productId);\r\n        const data = await fetchProductsByIdsUseCase.execute(ids);\r\n        if (data) {\r\n          set({\r\n            cartItems: cartItems.map((item) => {\r\n              const fresh = data.find((d) => d.id === item.productId);\r\n              return fresh ? { ...item, productData: fresh } : item;\r\n            }),\r\n          });\r\n        }\r\n      },\r\n\r\n      openCart: () => set({ isCartOpen: true }),\r\n      closeCart: () => set({ isCartOpen: false }),\r\n    }),\r\n    {\r\n      name: 'shopping-cart-storage', \r\n      storage: createJSONStorage(() => localStorage),\r\n    }\r\n  )\r\n);"],"names":[],"mappings":"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"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/application/use-cases/FetchProductsUseCase.ts"],"sourcesContent":["import type { IProductRepository } from '@/domain/repositories/IProductRepository';\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nexport class FetchProductsUseCase {\r\n  constructor(private productRepository: IProductRepository) {}\r\n\r\n  async execute(from: number, to: number): Promise<{ products: IProduct[]; totalCount: number; error: any }> {\r\n    const { data, count, error } = await this.productRepository.fetchProducts(from, to);\r\n    return {\r\n      products: data || [],\r\n      totalCount: count || 0,\r\n      error,\r\n    };\r\n  }\r\n}"],"names":[],"mappings":";;;;AAGO,MAAM;;IACX,YAAY,AAAQ,iBAAqC,CAAE;aAAvC,oBAAA;IAAwC;IAE5D,MAAM,QAAQ,IAAY,EAAE,EAAU,EAAqE;QACzG,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,MAAM;QAChF,OAAO;YACL,UAAU,QAAQ,EAAE;YACpB,YAAY,SAAS;YACrB;QACF;IACF;AACF"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/controllers/useProductStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\nimport { SupabaseProductRepository } from '@/infrastructure/repositories/SupabaseProductRepository';\r\nimport { FetchProductsUseCase } from '@/application/use-cases/FetchProductsUseCase';\r\n\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nconst productRepository = new SupabaseProductRepository();\r\nconst fetchProductsUseCase = new FetchProductsUseCase(productRepository);\r\n\r\ninterface ProductState {\r\n  products: IProduct[];\r\n  totalCount: number;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  currentPage: number;\r\n  itemsPerPage: number;\r\n  fetchProducts: () => Promise<void>;\r\n  setCurrentPage: (page: number) => void;\r\n}\r\n\r\nexport const useProductStore = create<ProductState>((set, get) => ({\r\n  products: [],\r\n  totalCount: 0,\r\n  isLoading: false,\r\n  error: null,\r\n  currentPage: 1,\r\n  itemsPerPage: 9,\r\n\r\n  fetchProducts: async () => {\r\n    const { currentPage, itemsPerPage } = get();\r\n    set({ isLoading: true, error: null });\r\n\r\n    const from = (currentPage - 1) * itemsPerPage;\r\n    const to = from + itemsPerPage - 1;\r\n\r\n    const { products, totalCount, error } = await fetchProductsUseCase.execute(from, to);\r\n\r\n    if (error) {\r\n      set({ error: error.message, isLoading: false });\r\n    } else {\r\n      set({ \r\n        products, \r\n        totalCount,\r\n        isLoading: false \r\n      });\r\n    }\r\n  },\r\n\r\n  setCurrentPage: (page) => {\r\n    set({ currentPage: page });\r\n    get().fetchProducts();\r\n  },\r\n}));"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;AAIA,MAAM,oBAAoB,IAAI,+LAAyB;AACvD,MAAM,uBAAuB,IAAI,kLAAoB,CAAC;AAa/C,MAAM,kBAAkB,IAAA,kJAAM,EAAe,CAAC,KAAK,MAAQ,CAAC;QACjE,UAAU,EAAE;QACZ,YAAY;QACZ,WAAW;QACX,OAAO;QACP,aAAa;QACb,cAAc;QAEd,eAAe;YACb,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG;YACtC,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YAEnC,MAAM,OAAO,CAAC,cAAc,CAAC,IAAI;YACjC,MAAM,KAAK,OAAO,eAAe;YAEjC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM,qBAAqB,OAAO,CAAC,MAAM;YAEjF,IAAI,OAAO;gBACT,IAAI;oBAAE,OAAO,MAAM,OAAO;oBAAE,WAAW;gBAAM;YAC/C,OAAO;gBACL,IAAI;oBACF;oBACA;oBACA,WAAW;gBACb;YACF;QACF;QAEA,gBAAgB,CAAC;YACf,IAAI;gBAAE,aAAa;YAAK;YACxB,MAAM,aAAa;QACrB;IACF,CAAC"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/hooks/useRealtimeSync.ts"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nimport { supabase } from '@/infrastructure/external/supabase';\r\n\r\nimport { type IProduct } from '@/domain/entities/product';\r\n\r\nimport { useProductStore } from '../controllers/useProductStore';\r\nimport { useCartStore } from '../controllers/useCartStore';\r\n\r\nexport const useRealtimeSync = () => {\r\n  useEffect(() => {\r\n    const channel = supabase\r\n      .channel('global-updates')\r\n      .on(\r\n        'postgres_changes',\r\n        { event: 'UPDATE', schema: 'public', table: 'products' },\r\n        (payload) => {\r\n          const updatedProduct = payload.new as IProduct;\r\n\r\n          useProductStore.setState((state) => ({\r\n            products: state.products.map((p) =>\r\n              p.id === updatedProduct.id ? updatedProduct : p\r\n            ),\r\n          }));\r\n\r\n          const { cartItems, updateProductDataInCart } = useCartStore.getState();\r\n          const isInCart = cartItems.some(item => item.productId === updatedProduct.id);\r\n          \r\n          if (isInCart) {\r\n            updateProductDataInCart(updatedProduct);\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, []);\r\n};"],"names":[],"mappings":";;;;AAAA;AAEA;AAIA;AACA;;;;;AAEO,MAAM,kBAAkB;IAC7B,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,yJAAQ,CACrB,OAAO,CAAC,kBACR,EAAE,CACD,oBACA;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;QAAW,GACvD,CAAC;YACC,MAAM,iBAAiB,QAAQ,GAAG;YAElC,wKAAe,CAAC,QAAQ,CAAC,CAAC,QAAU,CAAC;oBACnC,UAAU,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,eAAe,EAAE,GAAG,iBAAiB;gBAElD,CAAC;YAED,MAAM,EAAE,SAAS,EAAE,uBAAuB,EAAE,GAAG,kKAAY,CAAC,QAAQ;YACpE,MAAM,WAAW,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,SAAS,KAAK,eAAe,EAAE;YAE5E,IAAI,UAAU;gBACZ,wBAAwB;YAC1B;QACF,GAED,SAAS;QAEZ,OAAO;YACL,yJAAQ,CAAC,aAAa,CAAC;QACzB;IACF,GAAG,EAAE;AACP"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/hooks/useSyncTabs.ts"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nimport { useCartStore } from '../controllers/useCartStore';\r\n\r\nexport const useSyncTabs = () => {\r\n  useEffect(() => {\r\n    const handleStorageChange = (event: StorageEvent) => {\r\n      if (event.key === 'shopping-cart-storage') {\r\n        useCartStore.persist.rehydrate();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n};"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,MAAM,cAAc;IACzB,IAAA,kNAAS,EAAC;QACR,MAAM,sBAAsB,CAAC;YAC3B,IAAI,MAAM,GAAG,KAAK,yBAAyB;gBACzC,kKAAY,CAAC,OAAO,CAAC,SAAS;YAChC;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG,EAAE;AACP"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/Header.tsx"],"sourcesContent":["import React from 'react';\r\nimport Link from 'next/link';\r\n\r\nimport { useCartStore, selectTotalQuantity } from '@/presentation/controllers/useCartStore'; \r\n\r\nconst Header: React.FC = () => {\r\n  const totalQuantity = useCartStore(selectTotalQuantity);\r\n  const openCart = useCartStore(state => state.openCart);\r\n\r\n  return (\r\n    <header className=\"mb-8 flex justify-between items-center\">\r\n      <h1 className=\"text-3xl font-bold text-gray-800\">\r\n        Shop\r\n      </h1>\r\n      <Link href=\"/cart\">\r\n        <button className=\"relative p-3 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition cursor-pointer\">\r\n            üõí Products in cart: {totalQuantity}\r\n        </button>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,SAAmB;IACvB,MAAM,gBAAgB,IAAA,kKAAY,EAAC,yKAAmB;IACtD,MAAM,WAAW,IAAA,kKAAY,EAAC,CAAA,QAAS,MAAM,QAAQ;IAErD,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAG,WAAU;0BAAmC;;;;;;0BAGjD,8OAAC,uKAAI;gBAAC,MAAK;0BACT,cAAA,8OAAC;oBAAO,WAAU;;wBAAwG;wBAChG;;;;;;;;;;;;;;;;;;AAKlC;uCAEe"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/ProductCard.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nimport { useCartStore } from '@/presentation/controllers/useCartStore';\r\n\r\ninterface ProductCardProps {\r\n  product: IProduct;\r\n}\r\n\r\nconst fallbackImageUrl = 'http://picsum.photos/400'; \r\n\r\nconst ProductCard: React.FC<ProductCardProps> = ({ product }) => {\r\n  const { \r\n    addToCart, \r\n    increaseQuantity, \r\n    decreaseQuantity, \r\n    removeFromCart, \r\n    cartItems \r\n  } = useCartStore();\r\n\r\n  const cartItem = cartItems.find(item => item.productId === product.id);\r\n  const quantityInCart = cartItem ? cartItem.quantity : 0;\r\n\r\n  const isOutOfStock = product.quantity <= 0;\r\n  const isLimitReached = quantityInCart >= product.quantity;\r\n\r\n  const isInventoryExceeded = quantityInCart > product.quantity;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col h-full transform transition duration-300 hover:shadow-xl\">\r\n      <img\r\n        src={product.image_url}\r\n        alt={product.title}\r\n        className=\"w-full h-48 object-cover\"\r\n        onError={(e) => {\r\n          e.currentTarget.src = fallbackImageUrl;\r\n        }}\r\n      />\r\n      \r\n      <div className=\"p-5 flex flex-col grow\">\r\n        <h2 className=\"text-xl font-semibold text-gray-800 line-clamp-2\" title={product.title}>\r\n          {product.title}\r\n        </h2>\r\n\r\n        <div className=\"mt-1 flex flex-col\">\r\n          <p className={`text-sm font-medium ${isOutOfStock ? 'text-red-500' : 'text-green-600'}`}>\r\n            {isOutOfStock ? 'Not available in stock' : `In stock: ${product.quantity} pc.`}\r\n          </p>\r\n\r\n          {isInventoryExceeded && (\r\n            <p className=\"text-[11px] text-red-600 font-bold animate-pulse bg-red-50 px-2 py-1 rounded mt-1\">\r\n              ‚ö†Ô∏è Cart exceeds stock!\r\n            </p>\r\n          )}\r\n        </div>\r\n        \r\n        <p className=\"mt-2 text-gray-600 line-clamp-2 grow\">\r\n          {product.description}\r\n        </p>\r\n\r\n        <div className=\"mt-4 flex items-center justify-between\">\r\n          <span className=\"text-2xl font-bold text-indigo-600\">\r\n            ${product.price.toFixed(2)}\r\n          </span>\r\n\r\n          <div className=\"w-36 flex justify-end items-center\"> \r\n            {quantityInCart === 0 ? (\r\n              <button\r\n                disabled={isOutOfStock}\r\n                onClick={() => addToCart(product)}\r\n                className={`px-4 py-2 rounded-lg transition duration-200 w-full h-10 cursor-pointer ${\r\n                  isOutOfStock \r\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \r\n                  : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n                }`}\r\n                title=\"Add to cart\"\r\n              >\r\n                Add to Cart\r\n              </button>\r\n            ) : (\r\n              <div className=\"flex items-center space-x-2 h-10\">\r\n                  <button \r\n                      onClick={() => decreaseQuantity(product.id)}\r\n                      className=\"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200 transition flex items-center justify-center cursor-pointer\"\r\n                      title=\"Decrease quantity\"\r\n                  >\r\n                      -\r\n                  </button>\r\n                  <span className={`font-semibold ${isInventoryExceeded ? 'text-red-600' : ''}`}>\r\n                    {quantityInCart}\r\n                  </span>\r\n                  <button\r\n                    disabled={isLimitReached}\r\n                    onClick={() => increaseQuantity(product.id)}\r\n                    className={`w-10 h-10 rounded-lg transition flex items-center justify-center ${\r\n                      isLimitReached \r\n                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed' \r\n                        : 'bg-indigo-100 text-indigo-600 hover:bg-indigo-200 cursor-pointer'\r\n                    }`}\r\n                    title=\"Increase quantity\"\r\n                  >\r\n                      +\r\n                  </button>\r\n                  <button\r\n                      onClick={() => removeFromCart(product.id)}\r\n                      className=\"w-10 h-10 text-red-500 hover:text-red-700 transition flex items-center justify-center cursor-pointer\"\r\n                      title=\"Remove from cart\"\r\n                  >\r\n                      ‚úï\r\n                  </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;"],"names":[],"mappings":";;;;;AAIA;;;AAMA,MAAM,mBAAmB;AAEzB,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE;IAC1D,MAAM,EACJ,SAAS,EACT,gBAAgB,EAChB,gBAAgB,EAChB,cAAc,EACd,SAAS,EACV,GAAG,IAAA,kKAAY;IAEhB,MAAM,WAAW,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,SAAS,KAAK,QAAQ,EAAE;IACrE,MAAM,iBAAiB,WAAW,SAAS,QAAQ,GAAG;IAEtD,MAAM,eAAe,QAAQ,QAAQ,IAAI;IACzC,MAAM,iBAAiB,kBAAkB,QAAQ,QAAQ;IAEzD,MAAM,sBAAsB,iBAAiB,QAAQ,QAAQ;IAE7D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,KAAK,QAAQ,SAAS;gBACtB,KAAK,QAAQ,KAAK;gBAClB,WAAU;gBACV,SAAS,CAAC;oBACR,EAAE,aAAa,CAAC,GAAG,GAAG;gBACxB;;;;;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;wBAAmD,OAAO,QAAQ,KAAK;kCAClF,QAAQ,KAAK;;;;;;kCAGhB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAW,CAAC,oBAAoB,EAAE,eAAe,iBAAiB,kBAAkB;0CACpF,eAAe,2BAA2B,CAAC,UAAU,EAAE,QAAQ,QAAQ,CAAC,IAAI,CAAC;;;;;;4BAG/E,qCACC,8OAAC;gCAAE,WAAU;0CAAoF;;;;;;;;;;;;kCAMrG,8OAAC;wBAAE,WAAU;kCACV,QAAQ,WAAW;;;;;;kCAGtB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;;oCAAqC;oCACjD,QAAQ,KAAK,CAAC,OAAO,CAAC;;;;;;;0CAG1B,8OAAC;gCAAI,WAAU;0CACZ,mBAAmB,kBAClB,8OAAC;oCACC,UAAU;oCACV,SAAS,IAAM,UAAU;oCACzB,WAAW,CAAC,wEAAwE,EAClF,eACE,iDACA,gDACF;oCACF,OAAM;8CACP;;;;;6FAID,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CACG,SAAS,IAAM,iBAAiB,QAAQ,EAAE;4CAC1C,WAAU;4CACV,OAAM;sDACT;;;;;;sDAGD,8OAAC;4CAAK,WAAW,CAAC,cAAc,EAAE,sBAAsB,iBAAiB,IAAI;sDAC1E;;;;;;sDAEH,8OAAC;4CACC,UAAU;4CACV,SAAS,IAAM,iBAAiB,QAAQ,EAAE;4CAC1C,WAAW,CAAC,iEAAiE,EAC3E,iBACI,iDACA,oEACJ;4CACF,OAAM;sDACP;;;;;;sDAGD,8OAAC;4CACG,SAAS,IAAM,eAAe,QAAQ,EAAE;4CACxC,WAAU;4CACV,OAAM;sDACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUnB;uCAEe"}},
    {"offset": {"line": 551, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/ProductList.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport type { IProduct } from '@/domain/entities/product';\r\n\r\nimport ProductCard from './ProductCard';\r\n\r\ninterface ProductListProps {\r\n  products: IProduct[];\r\n}\r\n\r\nconst ProductList: React.FC<ProductListProps> = ({ products }) => {\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <h2 className=\"text-2xl font-semibold mb-6 text-gray-800\">Products showcase</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n        {products.map((product) => (\r\n          <ProductCard\r\n            key={product.id}\r\n            product={product}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;"],"names":[],"mappings":";;;;;AAIA;;;AAMA,MAAM,cAA0C,CAAC,EAAE,QAAQ,EAAE;IAC3D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA4C;;;;;;0BAC1D,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,4JAAW;wBAEV,SAAS;uBADJ,QAAQ,EAAE;;;;;;;;;;;;;;;;AAO3B;uCAEe"}},
    {"offset": {"line": 597, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/Pagination.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface PaginationProps {\r\n  itemsPerPage: number;\r\n  totalItems: number;\r\n  currentPage: number;\r\n  paginate: (pageNumber: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ itemsPerPage, totalItems, currentPage, paginate }) => {\r\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\r\n\r\n  if (totalPages <= 1) return null;\r\n\r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    const showMax = 5;\r\n\r\n    if (totalPages <= showMax) {\r\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n    } else {\r\n      pages.push(1);\r\n\r\n      if (currentPage > 3) pages.push('...');\r\n\r\n      const start = Math.max(2, currentPage - 1);\r\n      const end = Math.min(totalPages - 1, currentPage + 1);\r\n\r\n      for (let i = start; i <= end; i++) {\r\n        pages.push(i);\r\n      }\r\n\r\n      if (currentPage < totalPages - 2) pages.push('...');\r\n      pages.push(totalPages);\r\n    }\r\n    return pages;\r\n  };\r\n\r\n  return (\r\n    <nav className=\"mt-8 flex justify-center items-center space-x-2\">\r\n      <button\r\n        disabled={currentPage === 1}\r\n        onClick={() => paginate(currentPage - 1)}\r\n        className=\"px-3 py-2 rounded-lg border border-indigo-300 text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-50 transition cursor-pointer\"\r\n      >\r\n        &larr;\r\n      </button>\r\n      <ul className=\"flex items-center space-x-2\">\r\n        {getPageNumbers().map((number, index) => (\r\n          <li key={index}>\r\n            {number === '...' ? (\r\n              <span className=\"px-2 text-gray-400\">...</span>\r\n            ) : (\r\n              <button\r\n                onClick={() => paginate(number as number)}\r\n                className={`w-10 h-10 rounded-lg transition font-medium cursor-pointer ${\r\n                  currentPage === number\r\n                    ? 'bg-indigo-600 text-white shadow-lg scale-110'\r\n                    : 'bg-white text-indigo-600 border border-indigo-200 hover:bg-indigo-100'\r\n                }`}\r\n              >\r\n                {number}\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <button\r\n        disabled={currentPage === totalPages}\r\n        onClick={() => paginate(currentPage + 1)}\r\n        className=\"px-3 py-2 rounded-lg border border-indigo-300 text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-50 transition cursor-pointer\"\r\n      >\r\n        &rarr;\r\n      </button>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;"],"names":[],"mappings":";;;;;;AASA,MAAM,aAAwC,CAAC,EAAE,YAAY,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE;IAChG,MAAM,aAAa,KAAK,IAAI,CAAC,aAAa;IAE1C,IAAI,cAAc,GAAG,OAAO;IAE5B,MAAM,iBAAiB;QACrB,MAAM,QAAQ,EAAE;QAChB,MAAM,UAAU;QAEhB,IAAI,cAAc,SAAS;YACzB,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK,MAAM,IAAI,CAAC;QACnD,OAAO;YACL,MAAM,IAAI,CAAC;YAEX,IAAI,cAAc,GAAG,MAAM,IAAI,CAAC;YAEhC,MAAM,QAAQ,KAAK,GAAG,CAAC,GAAG,cAAc;YACxC,MAAM,MAAM,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc;YAEnD,IAAK,IAAI,IAAI,OAAO,KAAK,KAAK,IAAK;gBACjC,MAAM,IAAI,CAAC;YACb;YAEA,IAAI,cAAc,aAAa,GAAG,MAAM,IAAI,CAAC;YAC7C,MAAM,IAAI,CAAC;QACb;QACA,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,UAAU,gBAAgB;gBAC1B,SAAS,IAAM,SAAS,cAAc;gBACtC,WAAU;0BACX;;;;;;0BAGD,8OAAC;gBAAG,WAAU;0BACX,iBAAiB,GAAG,CAAC,CAAC,QAAQ,sBAC7B,8OAAC;kCACE,WAAW,sBACV,8OAAC;4BAAK,WAAU;sCAAqB;;;;;qFAErC,8OAAC;4BACC,SAAS,IAAM,SAAS;4BACxB,WAAW,CAAC,2DAA2D,EACrE,gBAAgB,SACZ,iDACA,yEACJ;sCAED;;;;;;uBAZE;;;;;;;;;;0BAkBb,8OAAC;gBACC,UAAU,gBAAgB;gBAC1B,SAAS,IAAM,SAAS,cAAc;gBACtC,WAAU;0BACX;;;;;;;;;;;;AAKP;uCAEe"}},
    {"offset": {"line": 688, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/presentation/components/ProductManager.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nimport { useProductStore } from '@/presentation/controllers/useProductStore';\r\n\r\nimport ProductList from './ProductList';\r\nimport Pagination from './Pagination';\r\n\r\nconst ProductManager: React.FC = () => {\r\n    const {\r\n        products,\r\n        totalCount,\r\n        isLoading,\r\n        error,\r\n        currentPage,\r\n        itemsPerPage,\r\n        fetchProducts,\r\n        setCurrentPage,\r\n    } = useProductStore();\r\n    \r\n\r\n    useEffect(() => {\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    if (isLoading) {\r\n        return <div className=\"p-8 text-center\">Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"p-8 text-center text-red-600\">Error: {error}</div>;\r\n    }\r\n\r\n    return (\r\n        <main>\r\n            <ProductList products={products} /> \r\n            <Pagination \r\n                itemsPerPage={itemsPerPage} \r\n                totalItems={totalCount}\r\n                currentPage={currentPage} \r\n                paginate={setCurrentPage}\r\n            />\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default ProductManager;"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA;AACA;;;;;;AAEA,MAAM,iBAA2B;IAC7B,MAAM,EACF,QAAQ,EACR,UAAU,EACV,SAAS,EACT,KAAK,EACL,WAAW,EACX,YAAY,EACZ,aAAa,EACb,cAAc,EACjB,GAAG,IAAA,wKAAe;IAGnB,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,IAAI,WAAW;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAkB;;;;;;IAC5C;IAEA,IAAI,OAAO;QACP,qBAAO,8OAAC;YAAI,WAAU;;gBAA+B;gBAAQ;;;;;;;IACjE;IAEA,qBACI,8OAAC;;0BACG,8OAAC,4JAAW;gBAAC,UAAU;;;;;;0BACvB,8OAAC,2JAAU;gBACP,cAAc;gBACd,YAAY;gBACZ,aAAa;gBACb,UAAU;;;;;;;;;;;;AAI1B;uCAEe"}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/shop-test/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\n\nimport { useCartStore } from '@/presentation/controllers/useCartStore';\n\nimport { useRealtimeSync } from '@/presentation/hooks/useRealtimeSync';\nimport { useSyncTabs } from '@/presentation/hooks/useSyncTabs';\n\nimport Header from '@/presentation/components/Header';\nimport ProductManager from '@/presentation/components/ProductManager';\n\nexport default function Page() {\n  const { refreshCartData } = useCartStore();\n\n  useRealtimeSync();\n  useSyncTabs();\n\n  useEffect(() => {\n    refreshCartData();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4 md:p-8\">\n      <Header />\n\n      <ProductManager />\n    </div>\n  );\n};"],"names":[],"mappings":";;;;;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AAVA;;;;;;;;AAYe,SAAS;IACtB,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,kKAAY;IAExC,IAAA,kKAAe;IACf,IAAA,0JAAW;IAEX,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,uJAAM;;;;;0BAEP,8OAAC,+JAAc;;;;;;;;;;;AAGrB"}}]
}